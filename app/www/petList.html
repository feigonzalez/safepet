<head>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="assets/style.css">
	<link rel="stylesheet" href="assets/custom/petList.css">
	<script src="assets/app.js"></script>
	<script src="assets/connect.js"></script>
	<script src="assets/urlParams.js"></script>
	<script>
		async function beforeLoad(){
			document.querySelector("#accountName").textContent=userData.name;
			//document.querySelector("#profileImage").dataset.imgsrc=accountData["image"];
		
			petData = await request(SERVER_URL+"getPetList.php",{account_id:userData.account_id});
			if(petData.status=="MISS"){
				document.querySelector("#petList .card").innerHTML="No tienes ninguna mascota registrada";
			} else {
				fillIterable(document.querySelector("[foreach=pets]"),petData)
			}
		}
	</script>
</head>
<body class="column">

	<div class="row header">
		<button id="backButton" class="column compact"><span class="icon" data-icon="chevron-left"></span></button>
		<div class="column ta-left">
			<a href="settings.html"><h1>Hola, <span id="accountName"></span></h1></a>
		</div>
		<div class="column compact">
			<a class="button round" href="settings.html"><span class="icon" data-icon="person"></span></a>
		</div>
	</div>
	
	<div class="row">
		<div class="column list" id="petList"> <!-- Lista de mascotas -->
	
			<div class="card row compact" await foreach="pets">
				<a href="petDetail.html?id=${id}" class="row">
					<div class="column compact">
						<div class="petImageDisplay" data-img="${imageURL}"></div>
					</div>
					<div class="column ph-1 size-full-width ta-left">
					<div class="cardTitle row ta-left bold">
						<span content="${name}"></span>
					</div>
						<div class="row ta-left metaText">
							<span content="${species} (${breed})"></span>
						</div>
					</div>
					<div class="column compact">
						<span class="icon cardChevron" data-icon="chevron-right"></span>
					</div>
				</a>
			</div>
			
			<div class="row compact">
				<div class="column ph-1">
					<a class="button bg-primary" href="register.html">AÃ±adir Mascota</a>
					<!-- a class="button bg-primary" href="reportHistory.html">Historial de Alertas</a --> <!-- ????? -->
				</div>
			</div>
			
		</div>
	</div>
	
</body>